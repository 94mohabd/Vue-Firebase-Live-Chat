rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {    
    match /messages/{messageId} {
      allow read, write: if request.auth != null;
    } 
     match /posts/{postId} {
        allow read, delete: if request.time < timestamp.date(2025, 2, 10);
        // Ensure title and body fields exist when adding a post
        allow create: if request.resource.data.keys().hasAll(['title', 'body']) &&
                    request.resource.data.title is string &&
                    request.resource.data.body is string &&
                    request.resource.data.title != '' &&
                    request.resource.data.body != '';
    }   
  }
}
